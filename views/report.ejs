<!DOCTYPE html>

<html lang="en-us">

<head>
    <link href='http://fonts.googleapis.com/css?family=Montserrat|Open+Sans' rel='stylesheet' type='text/css'>
    <title>Positivity Report Card</title>
    <script src='//ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js' type='text/javascript'> </script>
    <script src="http://code.jquery.com/color/jquery.color-2.1.2.js"></script>
    <link rel="stylesheet" href="reset.css" />
    <link rel="stylesheet" href="text.css" />
    <link rel="stylesheet" href="960.css" />
    <link rel="stylesheet" href="demo.css" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,800' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src='//ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js' type='text/javascript'> </script>
    <script src='jquery.flot.js' type='text/javascript'> </script>
    <script src='jquery.flot.time.js' type='text/javascript'> </script>
    <script src="http://code.jquery.com/color/jquery.color-2.1.2.js"></script>
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="excanvas.min.js"></script><![endif]-->
</head>
<center>
<body>
<div class="container_12">
  <div class="grid_12">
    <p class = "logo"><img src="logo.png" class="some_text"></p>
  </div>
  <!-- end .grid_12 -->
  <div class="clear"></div>
  <div class="grid_12">
    <form method="get" id="form">
      <input type="text" name="handle" placeholder="Try another Twitter handle" autofocus="true" id="web" />
    </form>
  </div>
 <!-- end .grid_12 -->
<div class="clear"></div>
<div class="grid_12">
<p class="score"><%= tweeter %>'s positivity number is <span class="number"><%= sentiment %></span></p>
</div>
<div class="clear"></div>
<div class="grid_12">
<% 
var output = "";
if(sentiment < 10)  {
	output = tweeter + ' is extremely negative. They should work on that.';
} else if(sentiment < 20) {
        output = tweeter + ' is very negative. That is bad.';
} else if(sentiment < 30) {
        output = tweeter + ' is pretty negative. If they worked at it, they could definitely improve.';
} else if(sentiment < 40) {
        output = tweeter + ' is more negative than most. Or they just vent their frustrations on social media';
} else if(sentiment < 49) {
        output = tweeter + ' is a little more negative than average. Nothing to be alarmed at.';
} else if(sentiment < 51) {
        output = tweeter + ' is average. Run of the mill. Not positive or negative. Probably has no feelings at all.';
} else if(sentiment < 60) {
        output = tweeter + ' is a little more positive than the average. Good for them!';
} else if(sentiment < 70) {
        output = tweeter + ' is a positive polly.';
} else if(sentiment < 80) {
        output = tweeter + ' is really really positive.';
} else if(sentiment < 90) {
        output = tweeter + ' is maybe too positive';
} else {
        output = tweeter + ' is impossibly positive';
} %>

<p class="explanation"> <%= output %></p>

</div>
</div>
<div id="placeholder" style="width:600px;height:300px"> </div>
<% twitter_data.forEach(function(elem,i) { %>
    <p id="<%=i%>" class="tweet"> tweet: <%= elem.text %> </p>
        <% }); %>
</body>
</center>

<script> 
    var t = <%- JSON.stringify(twitter_data) %>; 
    var d = <%- JSON.stringify(data) %> ;
    var monthNames = [ "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December" ];
    var algo = function algo(n) {
        return Math.min(100, Math.max(((parseFloat(n)+2)*25),0));
    }
    var tweet_series = d.map(function(item) {
        return [item.date, algo(item.sentiment[0])];
    });
    var data = [tweet_series];
    var options = {
        grid: { 
            hoverable: true, 
            clickable: true 
        },
        colors: ["#d08261"],
        xaxis: {  mode: "time"},
        series: { 
            lines: { show: true },
            points: { show: true }
        }
    };
    $.plot($("#placeholder"), data, options);
    $("#placeholder").bind("plotclick", function (event, pos, item) {
        if (item) {
            console.log(item);
            $('html, body').animate({scrollTop: $("#" + item.dataIndex).offset().top}, 2000);
        }
    });
</script> 

</html>
